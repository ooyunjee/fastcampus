<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Parallax Design</title>
  <style>
  html {
    overflow-x: hidden;
  }
  [class*="circle-"] {
    background: #222;
    border-radius: 50%;
    opacity: 0;
  }

  .circle-100 {
    width: 100px;
    height: 100px;
  }

  .circle-50 {
    width: 50px;
    height: 50px;
    background: #d68e8e;
  }

  .circle-1000 {
    width: 1000px;
    height: 1000px;
    background: #f3f3f3;
  }
  </style>
  <script>
  (function(global) {
    'use strict';

    function getRandomNumber(number) {
      return Math.floor(Math.random() * number);
    }

    // circle 객체의 위치를 임의로 설정 함수
    function randomCirclePosition() {
      // 초기화 과정에서는 문서에 존재하는 [class*="circle-"] 문서 객체를 수집
      var circles = document.querySelectorAll('[class*="circle-"]');
      console.log('circles:', circles);
      // 수집된 circle 객체에 공통적으로 absolute 포지션을 설정한다.
      // 그리고 랜덤하게 화면의 곳곳에 배치한다.
      for(var i = 0, l = circles.length; i < l; i++) {
        var circle = circles[i];
        // console.log('circle:', circle);
        circle.style.position = 'absolute';
        circle.style.top = getRandomNumber(window.innerHeight) + 'px';
        circle.style.left = getRandomNumber(window.innerWidth) + 'px';
        circle.style.opacity = 1;
      }
    }

    // parallax 이벤트 핸들링
    function circleParallaxScroll() {
      var scroll_y = this.scrollY || this.pageYOfsset || this.scrollTop;
      // circle 원을 각각 제어 한다.
      var circles = document.querySelectorAll('[class*="circle-"]');
      for ( var i=0, l=circles.length; i<l; i++ ) {
        var circle = circles[i];
        var top = parseInt(circle.style.top, 10);
        var x = 0.5 * i;
        if ( i === 1 ) { x = -1 * x * (i+1); }
        circle.style.top = top + (scroll_y/300 * x) + 'px';
      }
    }

    // 애플리케이션 초기화
    function init() {
      // circle 객체의 위치를 임의로 설정
      randomCirclePosition();

      // 스크롤 이벤트가 발생하면 각 객체의 위치를 조정한다.
      window.onscroll = circleParallaxScroll;
    }

    // windonw {} 객체의 load 이벤트가 발동(감지)되면, init() 함수 실행
    window.onload = init;

  })(this);

  </script>
</head>
<body>
  <div class="circle-100"></div>
  <div class="circle-50"></div>
  <div class="circle-1000"></div>
</body>
</html>
